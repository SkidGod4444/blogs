[
  {
    "slug": "blogs/build-your-own-database",
    "title": "Build your own SQL Database using TypeScript",
    "description": "This project will help you grasp low-level systems without requiring any prior knowledge of database engineering. I‚Äôve included all the essential details to guide you through how everything works, and I‚Äôve also used ChatGPT to strengthen my understanding of the concepts. Hope this helps you.",
    "github": "https://github.com/SkidGod4444/blogs/blob/main/content/blogs/build-your-own-database.mdx",
    "cover": "",
    "shortenSlug": "byodb",
    "published": true,
    "date": "2024-03-14T00:00:00.000Z",
    "body": "const{Fragment:e,jsx:n,jsxs:l}=arguments[0];function _createMdxContent(r){const s={a:\"a\",code:\"code\",em:\"em\",figure:\"figure\",h2:\"h2\",li:\"li\",ol:\"ol\",p:\"p\",pre:\"pre\",span:\"span\",strong:\"strong\",ul:\"ul\",...r.components},{Callout:a,CalloutDescription:c,CalloutTitle:i}=s;return a||_missingMdxReference(\"Callout\",!0),c||_missingMdxReference(\"CalloutDescription\",!0),i||_missingMdxReference(\"CalloutTitle\",!0),l(e,{children:[l(a,{type:\"info\",children:[n(i,{children:\"Note\"}),n(c,{children:l(s.p,{children:[\"This project is a work in progress, and the content of this blog may be updated over time. We‚Äôre also documenting the journey through a playlist on our \",n(s.a,{href:\"https://dub.sh/skidgod\",children:\"YouTube channel\"}),\", so be sure to subscribe!\"]})})]}),\"\\n\",l(s.h2,{id:\"introduction\",children:[n(s.a,{className:\"subheading-anchor\",\"aria-label\":\"Link to section\",href:\"#introduction\",children:n(s.span,{className:\"icon icon-link\"})}),\"Introduction\"]}),\"\\n\",l(s.p,{children:[\"As a developer, I wanted to understand how databases work under the hood, including data structures like\\n\",n(\"b\",{children:\"B-Trees\"}),\" and \",n(\"b\",{children:\"Red-Black Trees\"}),\". Instead of just reading about them, I decided to build my own database from scratch in\\nTypeScript. This blog walks you through how we designed and implemented a realistic SQL-like database engine in TypeScript using:\"]}),\"\\n\",l(s.ul,{children:[\"\\n\",n(s.li,{children:\"A custom parser for simple SQL syntax\"}),\"\\n\",n(s.li,{children:\"A B-tree-based key-value store\"}),\"\\n\",n(s.li,{children:\"A file-based storage system for data persistence\"}),\"\\n\",n(s.li,{children:\"Binary disk persistence\"}),\"\\n\",n(s.li,{children:\"Write-ahead logging (WAL)\"}),\"\\n\",n(s.li,{children:\"Support for multiple tables\"}),\"\\n\",n(s.li,{children:\"Basic SQL operations like SELECT, INSERT, UPDATE, and DELETE\"}),\"\\n\"]}),\"\\n\",l(s.h2,{id:\"technologies\",children:[n(s.a,{className:\"subheading-anchor\",\"aria-label\":\"Link to section\",href:\"#technologies\",children:n(s.span,{className:\"icon icon-link\"})}),\"Technologies\"]}),\"\\n\",n(s.p,{children:\"Feel free to choose any other alternatives you are familiar with. These are my choices:\"}),\"\\n\",l(s.ul,{children:[\"\\n\",l(s.li,{children:[n(s.a,{href:\"https://www.typescriptlang.org/\",children:n(s.em,{children:n(s.strong,{children:\"TypeScript\"})})}),\" - We'll be using TypeScript as our core language but you can go along with \",n(s.strong,{children:\"GO\"}),\" lang.\"]}),\"\\n\",l(s.li,{children:[n(s.a,{href:\"https://bun.sh/\",children:n(s.em,{children:n(s.strong,{children:\"Bun\"})})}),\" - We'll be using Bun as our runtime environment, which is a fast JavaScript runtime like Node.js but with better performance and built-in TypeScript support.\"]}),\"\\n\"]}),\"\\n\",l(s.h2,{id:\"project-setup\",children:[n(s.a,{className:\"subheading-anchor\",\"aria-label\":\"Link to section\",href:\"#project-setup\",children:n(s.span,{className:\"icon icon-link\"})}),\"Project Setup\"]}),\"\\n\",l(s.ul,{children:[\"\\n\",l(s.li,{children:[n(s.strong,{children:\"Language & Runtime:\"}),\" TypeScript + Bun\"]}),\"\\n\",n(s.li,{children:n(s.strong,{children:\"Folder Structure:\"})}),\"\\n\"]}),\"\\n\",n(s.figure,{\"data-rehype-pretty-code-figure\":\"\",children:n(s.pre,{style:{backgroundColor:\"#17191e\",color:\"#eef0f9\"},tabIndex:\"0\",\"data-language\":\"bash\",\"data-theme\":\"houston\",children:l(s.code,{\"data-language\":\"bash\",\"data-theme\":\"houston\",style:{display:\"grid\"},children:[n(s.span,{\"data-line\":\"\",children:n(s.span,{style:{color:\"#00DAEF\"},children:\"LumeDB/\"})}),\"\\n\",l(s.span,{\"data-line\":\"\",children:[n(s.span,{style:{color:\"#00DAEF\"},children:\"‚îú‚îÄ‚îÄ\"}),n(s.span,{style:{color:\"#FFD493\"},children:\" src/\"})]}),\"\\n\",l(s.span,{\"data-line\":\"\",children:[n(s.span,{style:{color:\"#00DAEF\"},children:\"‚îÇ\"}),n(s.span,{style:{color:\"#FFD493\"},children:\"   ‚îú‚îÄ‚îÄ\"}),n(s.span,{style:{color:\"#FFD493\"},children:\" storage/\"})]}),\"\\n\",l(s.span,{\"data-line\":\"\",children:[n(s.span,{style:{color:\"#00DAEF\"},children:\"‚îÇ\"}),n(s.span,{style:{color:\"#FFD493\"},children:\"   ‚îÇ\"}),n(s.span,{style:{color:\"#FFD493\"},children:\"   ‚îî‚îÄ‚îÄ\"}),n(s.span,{style:{color:\"#FFD493\"},children:\" pager.ts\"})]}),\"\\n\",l(s.span,{\"data-line\":\"\",children:[n(s.span,{style:{color:\"#00DAEF\"},children:\"‚îÇ\"}),n(s.span,{style:{color:\"#FFD493\"},children:\"   ‚îú‚îÄ‚îÄ\"}),n(s.span,{style:{color:\"#FFD493\"},children:\" wal/\"})]}),\"\\n\",l(s.span,{\"data-line\":\"\",children:[n(s.span,{style:{color:\"#00DAEF\"},children:\"‚îÇ\"}),n(s.span,{style:{color:\"#FFD493\"},children:\"   ‚îÇ\"}),n(s.span,{style:{color:\"#FFD493\"},children:\"   ‚îî‚îÄ‚îÄ\"}),n(s.span,{style:{color:\"#FFD493\"},children:\" wal.ts\"})]}),\"\\n\",l(s.span,{\"data-line\":\"\",children:[n(s.span,{style:{color:\"#00DAEF\"},children:\"‚îÇ\"}),n(s.span,{style:{color:\"#FFD493\"},children:\"   ‚îú‚îÄ‚îÄ\"}),n(s.span,{style:{color:\"#FFD493\"},children:\" btree/\"})]}),\"\\n\",l(s.span,{\"data-line\":\"\",children:[n(s.span,{style:{color:\"#00DAEF\"},children:\"‚îÇ\"}),n(s.span,{style:{color:\"#FFD493\"},children:\"   ‚îÇ\"}),n(s.span,{style:{color:\"#FFD493\"},children:\"   ‚îî‚îÄ‚îÄ\"}),n(s.span,{style:{color:\"#FFD493\"},children:\" btree.ts\"})]}),\"\\n\",l(s.span,{\"data-line\":\"\",children:[n(s.span,{style:{color:\"#00DAEF\"},children:\"‚îÇ\"}),n(s.span,{style:{color:\"#FFD493\"},children:\"   ‚îú‚îÄ‚îÄ\"}),n(s.span,{style:{color:\"#FFD493\"},children:\" engine/\"})]}),\"\\n\",l(s.span,{\"data-line\":\"\",children:[n(s.span,{style:{color:\"#00DAEF\"},children:\"‚îÇ\"}),n(s.span,{style:{color:\"#FFD493\"},children:\"   ‚îÇ\"}),n(s.span,{style:{color:\"#FFD493\"},children:\"   ‚îú‚îÄ‚îÄ\"}),n(s.span,{style:{color:\"#FFD493\"},children:\" record.ts\"})]}),\"\\n\",l(s.span,{\"data-line\":\"\",children:[n(s.span,{style:{color:\"#00DAEF\"},children:\"‚îÇ\"}),n(s.span,{style:{color:\"#FFD493\"},children:\"   ‚îÇ\"}),n(s.span,{style:{color:\"#FFD493\"},children:\"   ‚îî‚îÄ‚îÄ\"}),n(s.span,{style:{color:\"#FFD493\"},children:\" query.ts\"})]}),\"\\n\",l(s.span,{\"data-line\":\"\",children:[n(s.span,{style:{color:\"#00DAEF\"},children:\"‚îÇ\"}),n(s.span,{style:{color:\"#FFD493\"},children:\"   ‚îú‚îÄ‚îÄ\"}),n(s.span,{style:{color:\"#FFD493\"},children:\" parser/\"})]}),\"\\n\",l(s.span,{\"data-line\":\"\",children:[n(s.span,{style:{color:\"#00DAEF\"},children:\"‚îÇ\"}),n(s.span,{style:{color:\"#FFD493\"},children:\"   ‚îÇ\"}),n(s.span,{style:{color:\"#FFD493\"},children:\"   ‚îî‚îÄ‚îÄ\"}),n(s.span,{style:{color:\"#FFD493\"},children:\" sqlParser.ts\"})]}),\"\\n\",l(s.span,{\"data-line\":\"\",children:[n(s.span,{style:{color:\"#00DAEF\"},children:\"‚îÇ\"}),n(s.span,{style:{color:\"#FFD493\"},children:\"   ‚îî‚îÄ‚îÄ\"}),n(s.span,{style:{color:\"#FFD493\"},children:\" main.ts\"})]}),\"\\n\",l(s.span,{\"data-line\":\"\",children:[n(s.span,{style:{color:\"#00DAEF\"},children:\"‚îú‚îÄ‚îÄ\"}),n(s.span,{style:{color:\"#FFD493\"},children:\" db/\"})]}),\"\\n\",l(s.span,{\"data-line\":\"\",children:[n(s.span,{style:{color:\"#00DAEF\"},children:\"‚îÇ\"}),n(s.span,{style:{color:\"#FFD493\"},children:\"   ‚îú‚îÄ‚îÄ\"}),n(s.span,{style:{color:\"#FFD493\"},children:\" data.db\"})]}),\"\\n\",l(s.span,{\"data-line\":\"\",children:[n(s.span,{style:{color:\"#00DAEF\"},children:\"‚îÇ\"}),n(s.span,{style:{color:\"#FFD493\"},children:\"   ‚îî‚îÄ‚îÄ\"}),n(s.span,{style:{color:\"#FFD493\"},children:\" wal.log\"})]}),\"\\n\",l(s.span,{\"data-line\":\"\",children:[n(s.span,{style:{color:\"#00DAEF\"},children:\"‚îú‚îÄ‚îÄ\"}),n(s.span,{style:{color:\"#FFD493\"},children:\" package.json\"})]}),\"\\n\",l(s.span,{\"data-line\":\"\",children:[n(s.span,{style:{color:\"#00DAEF\"},children:\"‚îú‚îÄ‚îÄ\"}),n(s.span,{style:{color:\"#FFD493\"},children:\" tsconfig.json\"})]})]})})}),\"\\n\",l(s.h2,{id:\"-step-1-the-basic-cli-shell\",children:[n(s.a,{className:\"subheading-anchor\",\"aria-label\":\"Link to section\",href:\"#-step-1-the-basic-cli-shell\",children:n(s.span,{className:\"icon icon-link\"})}),\"üß± Step 1: The Basic CLI Shell\"]}),\"\\n\",n(s.p,{children:'We start with a command-line interface using \"readline-sync\".'}),\"\\n\",n(s.figure,{\"data-rehype-pretty-code-figure\":\"\",children:n(s.pre,{style:{backgroundColor:\"#17191e\",color:\"#eef0f9\"},tabIndex:\"0\",\"data-language\":\"typescript\",\"data-theme\":\"houston\",children:l(s.code,{\"data-language\":\"typescript\",\"data-theme\":\"houston\",style:{display:\"grid\"},children:[l(s.span,{\"data-line\":\"\",children:[n(s.span,{style:{color:\"#54B9FF\"},children:\"const\"}),n(s.span,{style:{color:\"#ACAFFF\"},children:\" db\"}),n(s.span,{style:{color:\"#EEF0F9\"},children:\" = \"}),n(s.span,{style:{color:\"#54B9FF\"},children:\"new\"}),n(s.span,{style:{color:\"#00DAEF\"},children:\" DB\"}),n(s.span,{style:{color:\"#EEF0F9\"},children:\"(\"}),n(s.span,{style:{color:\"#FFD493\"},children:\"'db/data.db'\"}),n(s.span,{style:{color:\"#EEF0F9\"},children:\", \"}),n(s.span,{style:{color:\"#FFD493\"},children:\"'db/wal.log'\"}),n(s.span,{style:{color:\"#EEF0F9\"},children:\");\"})]}),\"\\n\",l(s.span,{\"data-line\":\"\",children:[n(s.span,{style:{color:\"#54B9FF\"},children:\"while\"}),n(s.span,{style:{color:\"#EEF0F9\"},children:\" (\"}),n(s.span,{style:{color:\"#FFD493\"},children:\"true\"}),n(s.span,{style:{color:\"#EEF0F9\"},children:\") {\"})]}),\"\\n\",l(s.span,{\"data-line\":\"\",children:[n(s.span,{style:{color:\"#54B9FF\"},children:\"  const\"}),n(s.span,{style:{color:\"#ACAFFF\"},children:\" input\"}),n(s.span,{style:{color:\"#EEF0F9\"},children:\" = \"}),n(s.span,{style:{color:\"#4BF3C8\"},children:\"readlineSync\"}),n(s.span,{style:{color:\"#EEF0F9\"},children:\".\"}),n(s.span,{style:{color:\"#00DAEF\"},children:\"question\"}),n(s.span,{style:{color:\"#EEF0F9\"},children:\"(\"}),n(s.span,{style:{color:\"#FFD493\"},children:\"'> '\"}),n(s.span,{style:{color:\"#EEF0F9\"},children:\");\"})]}),\"\\n\",l(s.span,{\"data-line\":\"\",children:[n(s.span,{style:{color:\"#54B9FF\"},children:\"  const\"}),n(s.span,{style:{color:\"#ACAFFF\"},children:\" result\"}),n(s.span,{style:{color:\"#EEF0F9\"},children:\" = \"}),n(s.span,{style:{color:\"#4BF3C8\"},children:\"db\"}),n(s.span,{style:{color:\"#EEF0F9\"},children:\".\"}),n(s.span,{style:{color:\"#00DAEF\"},children:\"execute\"}),n(s.span,{style:{color:\"#EEF0F9\"},children:\"(\"}),n(s.span,{style:{color:\"#4BF3C8\"},children:\"input\"}),n(s.span,{style:{color:\"#EEF0F9\"},children:\".\"}),n(s.span,{style:{color:\"#00DAEF\"},children:\"trim\"}),n(s.span,{style:{color:\"#EEF0F9\"},children:\"());\"})]}),\"\\n\",l(s.span,{\"data-line\":\"\",children:[n(s.span,{style:{color:\"#4BF3C8\"},children:\"  console\"}),n(s.span,{style:{color:\"#EEF0F9\"},children:\".\"}),n(s.span,{style:{color:\"#00DAEF\"},children:\"log\"}),n(s.span,{style:{color:\"#EEF0F9\"},children:\"(\"}),n(s.span,{style:{color:\"#4BF3C8\"},children:\"result\"}),n(s.span,{style:{color:\"#EEF0F9\"},children:\");\"})]}),\"\\n\",n(s.span,{\"data-line\":\"\",children:n(s.span,{style:{color:\"#EEF0F9\"},children:\"}\"})})]})})}),\"\\n\",n(s.p,{children:\"This REPL-style loop allows us to input SQL commands and interact with the database engine in real time.\"}),\"\\n\",n(s.p,{children:n(s.strong,{children:\"Benefits:\"})}),\"\\n\",l(s.ul,{children:[\"\\n\",n(s.li,{children:\"Simple to implement\"}),\"\\n\",n(s.li,{children:\"Interactive testing\"}),\"\\n\"]}),\"\\n\",n(s.p,{children:n(s.strong,{children:\"Improvements:\"})}),\"\\n\",l(s.ul,{children:[\"\\n\",n(s.li,{children:\"Use a web API or REPL framework for remote or web-based interaction\"}),\"\\n\"]}),\"\\n\",l(s.h2,{id:\"-step-2-core-database-logic\",children:[n(s.a,{className:\"subheading-anchor\",\"aria-label\":\"Link to section\",href:\"#-step-2-core-database-logic\",children:n(s.span,{className:\"icon icon-link\"})}),\"üß† Step 2: Core Database Logic\"]}),\"\\n\",n(s.p,{children:\"To handle SQL commands, we need a parser that can interpret basic SQL syntax.\\nWe built a custom parser to handle basic SQL commands:\"}),\"\\n\",n(s.figure,{\"data-rehype-pretty-code-figure\":\"\",children:n(s.pre,{style:{backgroundColor:\"#17191e\",color:\"#eef0f9\"},tabIndex:\"0\",\"data-language\":\"bash\",\"data-theme\":\"houston\",children:l(s.code,{\"data-language\":\"bash\",\"data-theme\":\"houston\",style:{display:\"grid\"},children:[l(s.span,{\"data-line\":\"\",children:[n(s.span,{style:{color:\"#00DAEF\"},children:\"INSERT\"}),n(s.span,{style:{color:\"#FFD493\"},children:\" INTO\"}),n(s.span,{style:{color:\"#FFD493\"},children:\" table\"}),n(s.span,{style:{color:\"#FFD493\"},children:\" VALUES\"}),n(s.span,{style:{color:\"#EEF0F9\"},children:\" (1, \"}),n(s.span,{style:{color:\"#FFD493\"},children:'\"Alice\"'}),n(s.span,{style:{color:\"#EEF0F9\"},children:\")\"})]}),\"\\n\",l(s.span,{\"data-line\":\"\",children:[n(s.span,{style:{color:\"#00DAEF\"},children:\"SELECT\"}),n(s.span,{style:{color:\"#ACAFFF\"},children:\" *\"}),n(s.span,{style:{color:\"#FFD493\"},children:\" FROM\"}),n(s.span,{style:{color:\"#FFD493\"},children:\" table\"}),n(s.span,{style:{color:\"#FFD493\"},children:\" WHERE\"}),n(s.span,{style:{color:\"#FFD493\"},children:\" id\"}),n(s.span,{style:{color:\"#FFD493\"},children:\" =\"}),n(s.span,{style:{color:\"#FFD493\"},children:\" 1\"})]}),\"\\n\",l(s.span,{\"data-line\":\"\",children:[n(s.span,{style:{color:\"#00DAEF\"},children:\"DELETE\"}),n(s.span,{style:{color:\"#FFD493\"},children:\" FROM\"}),n(s.span,{style:{color:\"#FFD493\"},children:\" table\"}),n(s.span,{style:{color:\"#FFD493\"},children:\" WHERE\"}),n(s.span,{style:{color:\"#FFD493\"},children:\" id\"}),n(s.span,{style:{color:\"#FFD493\"},children:\" =\"}),n(s.span,{style:{color:\"#FFD493\"},children:\" 1\"})]})]})})}),\"\\n\",n(s.p,{children:\"This is handled by parseSQL() which returns a structured command object with:\"}),\"\\n\",n(s.figure,{\"data-rehype-pretty-code-figure\":\"\",children:n(s.pre,{style:{backgroundColor:\"#17191e\",color:\"#eef0f9\"},tabIndex:\"0\",\"data-language\":\"typescript\",\"data-theme\":\"houston\",children:l(s.code,{\"data-language\":\"typescript\",\"data-theme\":\"houston\",style:{display:\"grid\"},children:[n(s.span,{\"data-line\":\"\",children:n(s.span,{style:{color:\"#EEF0F9\"},children:\"{\"})}),\"\\n\",l(s.span,{\"data-line\":\"\",children:[n(s.span,{style:{color:\"#EEF0F9\"},children:\"  command: \"}),n(s.span,{style:{color:\"#FFD493\"},children:\"'INSERT'\"}),n(s.span,{style:{color:\"#EEF0F9\"},children:\" | \"}),n(s.span,{style:{color:\"#FFD493\"},children:\"'SELECT'\"}),n(s.span,{style:{color:\"#EEF0F9\"},children:\" | \"}),n(s.span,{style:{color:\"#FFD493\"},children:\"'DELETE'\"}),n(s.span,{style:{color:\"#EEF0F9\"},children:\",\"})]}),\"\\n\",l(s.span,{\"data-line\":\"\",children:[n(s.span,{style:{color:\"#EEF0F9\"},children:\"  table: \"}),n(s.span,{style:{color:\"#FFD493\"},children:\"'tableName'\"}),n(s.span,{style:{color:\"#EEF0F9\"},children:\",\"})]}),\"\\n\",l(s.span,{\"data-line\":\"\",children:[n(s.span,{style:{color:\"#EEF0F9\"},children:\"  values: [\"}),n(s.span,{style:{color:\"#FFD493\"},children:\"1\"}),n(s.span,{style:{color:\"#EEF0F9\"},children:\", \"}),n(s.span,{style:{color:\"#FFD493\"},children:'\"Alice\"'}),n(s.span,{style:{color:\"#EEF0F9\"},children:\"],\"})]}),\"\\n\",l(s.span,{\"data-line\":\"\",children:[n(s.span,{style:{color:\"#EEF0F9\"},children:\"  where: { id: \"}),n(s.span,{style:{color:\"#FFD493\"},children:\"1\"}),n(s.span,{style:{color:\"#EEF0F9\"},children:\" }\"})]}),\"\\n\",n(s.span,{\"data-line\":\"\",children:n(s.span,{style:{color:\"#EEF0F9\"},children:\"}\"})})]})})}),\"\\n\",n(s.p,{children:n(s.strong,{children:\"Improvements:\"})}),\"\\n\",l(s.ul,{children:[\"\\n\",n(s.li,{children:\"Use a parser generator like PEG.js or ANTLR for extensibility\"}),\"\\n\"]}),\"\\n\",l(s.h2,{id:\"-step-3-b-tree-in-memory-store\",children:[n(s.a,{className:\"subheading-anchor\",\"aria-label\":\"Link to section\",href:\"#-step-3-b-tree-in-memory-store\",children:n(s.span,{className:\"icon icon-link\"})}),\"üå≥ Step 3: B-Tree In-Memory Store\"]}),\"\\n\",n(s.p,{children:\"We use a simple in-memory B-tree implementation for fast key-value access:\"}),\"\\n\",n(s.figure,{\"data-rehype-pretty-code-figure\":\"\",children:n(s.pre,{style:{backgroundColor:\"#17191e\",color:\"#eef0f9\"},tabIndex:\"0\",\"data-language\":\"typescript\",\"data-theme\":\"houston\",children:l(s.code,{\"data-language\":\"typescript\",\"data-theme\":\"houston\",style:{display:\"grid\"},children:[l(s.span,{\"data-line\":\"\",children:[n(s.span,{style:{color:\"#ACAFFF\"},children:\"this\"}),n(s.span,{style:{color:\"#EEF0F9\"},children:\".\"}),n(s.span,{style:{color:\"#4BF3C8\"},children:\"btree\"}),n(s.span,{style:{color:\"#EEF0F9\"},children:\".\"}),n(s.span,{style:{color:\"#00DAEF\"},children:\"insert\"}),n(s.span,{style:{color:\"#EEF0F9\"},children:\"(\"}),n(s.span,{style:{color:\"#4BF3C8\"},children:\"key\"}),n(s.span,{style:{color:\"#EEF0F9\"},children:\", \"}),n(s.span,{style:{color:\"#4BF3C8\"},children:\"value\"}),n(s.span,{style:{color:\"#EEF0F9\"},children:\");\"})]}),\"\\n\",l(s.span,{\"data-line\":\"\",children:[n(s.span,{style:{color:\"#ACAFFF\"},children:\"this\"}),n(s.span,{style:{color:\"#EEF0F9\"},children:\".\"}),n(s.span,{style:{color:\"#4BF3C8\"},children:\"btree\"}),n(s.span,{style:{color:\"#EEF0F9\"},children:\".\"}),n(s.span,{style:{color:\"#00DAEF\"},children:\"search\"}),n(s.span,{style:{color:\"#EEF0F9\"},children:\"(\"}),n(s.span,{style:{color:\"#4BF3C8\"},children:\"key\"}),n(s.span,{style:{color:\"#EEF0F9\"},children:\");\"})]}),\"\\n\",l(s.span,{\"data-line\":\"\",children:[n(s.span,{style:{color:\"#ACAFFF\"},children:\"this\"}),n(s.span,{style:{color:\"#EEF0F9\"},children:\".\"}),n(s.span,{style:{color:\"#4BF3C8\"},children:\"btree\"}),n(s.span,{style:{color:\"#EEF0F9\"},children:\".\"}),n(s.span,{style:{color:\"#00DAEF\"},children:\"delete\"}),n(s.span,{style:{color:\"#EEF0F9\"},children:\"(\"}),n(s.span,{style:{color:\"#4BF3C8\"},children:\"key\"}),n(s.span,{style:{color:\"#EEF0F9\"},children:\");\"})]})]})})}),\"\\n\",n(s.p,{children:n(s.strong,{children:\"Benefits:\"})}),\"\\n\",l(s.ul,{children:[\"\\n\",n(s.li,{children:\"Logarithmic access time\"}),\"\\n\",n(s.li,{children:\"Balanced tree prevents degeneration\"}),\"\\n\"]}),\"\\n\",n(s.p,{children:n(s.strong,{children:\"Real-World Upgrade:\"})}),\"\\n\",l(s.ul,{children:[\"\\n\",n(s.li,{children:\"Use a B+ tree where leaf nodes are linked for fast range scans\"}),\"\\n\",n(s.li,{children:\"Store tree nodes in fixed-size pages with serialization\"}),\"\\n\"]}),\"\\n\",l(s.h2,{id:\"-step-4-persistent-storage-with-pager\",children:[n(s.a,{className:\"subheading-anchor\",\"aria-label\":\"Link to section\",href:\"#-step-4-persistent-storage-with-pager\",children:n(s.span,{className:\"icon icon-link\"})}),\"üíæ Step 4: Persistent Storage with Pager\"]}),\"\\n\",n(s.p,{children:\"Instead of keeping data only in memory, we use a Pager that writes to disk:\"}),\"\\n\",n(s.figure,{\"data-rehype-pretty-code-figure\":\"\",children:n(s.pre,{style:{backgroundColor:\"#17191e\",color:\"#eef0f9\"},tabIndex:\"0\",\"data-language\":\"typescript\",\"data-theme\":\"houston\",children:l(s.code,{\"data-language\":\"typescript\",\"data-theme\":\"houston\",style:{display:\"grid\"},children:[l(s.span,{\"data-line\":\"\",children:[n(s.span,{style:{color:\"#54B9FF\"},children:\"const\"}),n(s.span,{style:{color:\"#ACAFFF\"},children:\" buffer\"}),n(s.span,{style:{color:\"#EEF0F9\"},children:\" = \"}),n(s.span,{style:{color:\"#4BF3C8\"},children:\"Buffer\"}),n(s.span,{style:{color:\"#EEF0F9\"},children:\".\"}),n(s.span,{style:{color:\"#00DAEF\"},children:\"from\"}),n(s.span,{style:{color:\"#EEF0F9\"},children:\"(\"}),n(s.span,{style:{color:\"#FFD493\"},children:\"`\"}),n(s.span,{style:{color:\"#54B9FF\"},children:\"${\"}),n(s.span,{style:{color:\"#4BF3C8\"},children:\"key\"}),n(s.span,{style:{color:\"#54B9FF\"},children:\"}\"}),n(s.span,{style:{color:\"#FFD493\"},children:\":\"}),n(s.span,{style:{color:\"#54B9FF\"},children:\"${\"}),n(s.span,{style:{color:\"#4BF3C8\"},children:\"value\"}),n(s.span,{style:{color:\"#54B9FF\"},children:\"}\"}),n(s.span,{style:{color:\"#EEF0F9\"},children:\"\\\\n\"}),n(s.span,{style:{color:\"#FFD493\"},children:\"`\"}),n(s.span,{style:{color:\"#EEF0F9\"},children:\");\"})]}),\"\\n\",l(s.span,{\"data-line\":\"\",children:[n(s.span,{style:{color:\"#4BF3C8\"},children:\"fs\"}),n(s.span,{style:{color:\"#EEF0F9\"},children:\".\"}),n(s.span,{style:{color:\"#00DAEF\"},children:\"writeFileSync\"}),n(s.span,{style:{color:\"#EEF0F9\"},children:\"(\"}),n(s.span,{style:{color:\"#ACAFFF\"},children:\"this\"}),n(s.span,{style:{color:\"#EEF0F9\"},children:\".\"}),n(s.span,{style:{color:\"#4BF3C8\"},children:\"path\"}),n(s.span,{style:{color:\"#EEF0F9\"},children:\", \"}),n(s.span,{style:{color:\"#4BF3C8\"},children:\"buffer\"}),n(s.span,{style:{color:\"#EEF0F9\"},children:\");\"})]})]})})}),\"\\n\",l(s.p,{children:[\"This simulates pages by storing rows as \",n(s.em,{children:\"key:value\"}),\" strings.\"]}),\"\\n\",n(s.p,{children:n(s.strong,{children:\"Limitations:\"})}),\"\\n\",l(s.ul,{children:[\"\\n\",n(s.li,{children:\"Not real page-based binary format yet\"}),\"\\n\",n(s.li,{children:\"No offset/index-based updates\"}),\"\\n\"]}),\"\\n\",n(s.p,{children:n(s.strong,{children:\"Future Work:\"})}),\"\\n\",l(s.ul,{children:[\"\\n\",n(s.li,{children:\"Use fixed-size binary pages (e.g. 4096 bytes)\"}),\"\\n\",n(s.li,{children:\"Store records at offsets, reuse deleted slots\"}),\"\\n\"]}),\"\\n\",l(s.h2,{id:\"-step-5-write-ahead-log-wal\",children:[n(s.a,{className:\"subheading-anchor\",\"aria-label\":\"Link to section\",href:\"#-step-5-write-ahead-log-wal\",children:n(s.span,{className:\"icon icon-link\"})}),\"üîê Step 5: Write-Ahead Log (WAL)\"]}),\"\\n\",n(s.p,{children:\"We implemented WAL to ensure durability:\"}),\"\\n\",n(s.figure,{\"data-rehype-pretty-code-figure\":\"\",children:n(s.pre,{style:{backgroundColor:\"#17191e\",color:\"#eef0f9\"},tabIndex:\"0\",\"data-language\":\"typescript\",\"data-theme\":\"houston\",children:l(s.code,{\"data-language\":\"typescript\",\"data-theme\":\"houston\",style:{display:\"grid\"},children:[l(s.span,{\"data-line\":\"\",children:[n(s.span,{style:{color:\"#ACAFFF\"},children:\"this\"}),n(s.span,{style:{color:\"#EEF0F9\"},children:\".\"}),n(s.span,{style:{color:\"#4BF3C8\"},children:\"wal\"}),n(s.span,{style:{color:\"#EEF0F9\"},children:\".\"}),n(s.span,{style:{color:\"#00DAEF\"},children:\"log\"}),n(s.span,{style:{color:\"#EEF0F9\"},children:\"(\"}),n(s.span,{style:{color:\"#FFD493\"},children:\"`INSERT users 1 Alice`\"}),n(s.span,{style:{color:\"#EEF0F9\"},children:\");\"})]}),\"\\n\",n(s.span,{\"data-line\":\"\",children:n(s.span,{style:{color:\"#EEF0F98F\",fontStyle:\"italic\"},children:\"// this.wal.flush();\"})})]})})}),\"\\n\",n(s.p,{children:n(s.strong,{children:\"Why WAL?\"})}),\"\\n\",n(s.p,{children:\"The Write-Ahead Log (WAL) is crucial for database reliability:\"}),\"\\n\",l(s.ol,{children:[\"\\n\",l(s.li,{children:[n(s.strong,{children:\"Crash Safety\"}),\": If the database crashes, we can replay the WAL to recover the last consistent state\"]}),\"\\n\",l(s.li,{children:[n(s.strong,{children:\"Atomicity\"}),\": WAL ensures that transactions are either fully committed or fully rolled back\"]}),\"\\n\",l(s.li,{children:[n(s.strong,{children:\"Recovery\"}),\": Provides a way to restore the database to a known good state\"]}),\"\\n\"]}),\"\\n\",n(s.p,{children:n(s.strong,{children:\"Production Suggestions:\"})}),\"\\n\",n(s.p,{children:\"For a production-ready WAL implementation:\"}),\"\\n\",l(s.ol,{children:[\"\\n\",l(s.li,{children:[n(s.strong,{children:\"Log Compaction\"}),\": Periodically compact the WAL by removing redundant entries\"]}),\"\\n\",l(s.li,{children:[n(s.strong,{children:\"Table-Specific WALs\"}),\": Maintain separate WAL files per table for better concurrency\"]}),\"\\n\",l(s.li,{children:[n(s.strong,{children:\"Checkpoints\"}),\": Regularly create checkpoints to reduce WAL replay time\"]}),\"\\n\"]}),\"\\n\",l(s.h2,{id:\"-step-6-multi-table-support\",children:[n(s.a,{className:\"subheading-anchor\",\"aria-label\":\"Link to section\",href:\"#-step-6-multi-table-support\",children:n(s.span,{className:\"icon icon-link\"})}),\"üìÅ Step 6: Multi-Table Support\"]}),\"\\n\",n(s.p,{children:\"Now we support multiple tables by using a Map:\"}),\"\\n\",n(s.figure,{\"data-rehype-pretty-code-figure\":\"\",children:n(s.pre,{style:{backgroundColor:\"#17191e\",color:\"#eef0f9\"},tabIndex:\"0\",\"data-language\":\"typescript\",\"data-theme\":\"houston\",children:l(s.code,{\"data-language\":\"typescript\",\"data-theme\":\"houston\",style:{display:\"grid\"},children:[l(s.span,{\"data-line\":\"\",children:[n(s.span,{style:{color:\"#ACAFFF\"},children:\"this\"}),n(s.span,{style:{color:\"#EEF0F9\"},children:\".\"}),n(s.span,{style:{color:\"#4BF3C8\"},children:\"tables\"}),n(s.span,{style:{color:\"#EEF0F9\"},children:\": \"}),n(s.span,{style:{color:\"#4BF3C8\"},children:\"Map\"}),n(s.span,{style:{color:\"#EEF0F9\"},children:\"<\"}),n(s.span,{style:{color:\"#4BF3C8\"},children:\"string\"}),n(s.span,{style:{color:\"#EEF0F9\"},children:\", { \"}),n(s.span,{style:{color:\"#4BF3C8\"},children:\"btree\"}),n(s.span,{style:{color:\"#EEF0F9\"},children:\", \"}),n(s.span,{style:{color:\"#4BF3C8\"},children:\"pager\"}),n(s.span,{style:{color:\"#EEF0F9\"},children:\" }>\"})]}),\"\\n\",l(s.span,{\"data-line\":\"\",children:[n(s.span,{style:{color:\"#ACAFFF\"},children:\"this\"}),n(s.span,{style:{color:\"#EEF0F9\"},children:\".\"}),n(s.span,{style:{color:\"#4BF3C8\"},children:\"tables\"}),n(s.span,{style:{color:\"#EEF0F9\"},children:\".\"}),n(s.span,{style:{color:\"#00DAEF\"},children:\"set\"}),n(s.span,{style:{color:\"#EEF0F9\"},children:\"(\"}),n(s.span,{style:{color:\"#FFD493\"},children:\"'users'\"}),n(s.span,{style:{color:\"#EEF0F9\"},children:\", { \"}),n(s.span,{style:{color:\"#4BF3C8\"},children:\"btree\"}),n(s.span,{style:{color:\"#EEF0F9\"},children:\": \"}),n(s.span,{style:{color:\"#54B9FF\"},children:\"new\"}),n(s.span,{style:{color:\"#00DAEF\"},children:\" BTree\"}),n(s.span,{style:{color:\"#EEF0F9\"},children:\"(), \"}),n(s.span,{style:{color:\"#4BF3C8\"},children:\"pager\"}),n(s.span,{style:{color:\"#EEF0F9\"},children:\": \"}),n(s.span,{style:{color:\"#54B9FF\"},children:\"new\"}),n(s.span,{style:{color:\"#00DAEF\"},children:\" Pager\"}),n(s.span,{style:{color:\"#EEF0F9\"},children:\"(\"}),n(s.span,{style:{color:\"#FFD493\"},children:\"'db/users.db'\"}),n(s.span,{style:{color:\"#EEF0F9\"},children:\") });\"})]})]})})}),\"\\n\",l(s.p,{children:[\"Each table has its own B-tree and Pager file like \",n(s.em,{children:\"data.db.users\"}),\".\"]}),\"\\n\",n(s.p,{children:n(s.strong,{children:\"Benefits:\"})}),\"\\n\",l(s.ul,{children:[\"\\n\",n(s.li,{children:\"Simulates real RDBMS architecture\"}),\"\\n\",n(s.li,{children:\"Isolates tables\"}),\"\\n\"]}),\"\\n\",n(s.p,{children:n(s.strong,{children:\"Improvements:\"})}),\"\\n\",l(s.ul,{children:[\"\\n\",n(s.li,{children:\"Support CREATE TABLE command\"}),\"\\n\",n(s.li,{children:\"Normalize table schema definition\"}),\"\\n\"]}),\"\\n\",l(s.h2,{id:\"-conclusion\",children:[n(s.a,{className:\"subheading-anchor\",\"aria-label\":\"Link to section\",href:\"#-conclusion\",children:n(s.span,{className:\"icon icon-link\"})}),\"üîö Conclusion\"]}),\"\\n\",n(s.p,{children:\"We've built a realistic SQL-like database from scratch using simple but scalable techniques:\"}),\"\\n\",l(s.ul,{children:[\"\\n\",n(s.li,{children:\"SQL command parser\"}),\"\\n\",n(s.li,{children:\"B-tree structure\"}),\"\\n\",n(s.li,{children:\"Persistent storage\"}),\"\\n\",n(s.li,{children:\"WAL logging\"}),\"\\n\",n(s.li,{children:\"Multi-table support\"}),\"\\n\"]}),\"\\n\",n(s.p,{children:\"This is a powerful learning experience for any developer and a stepping stone to more advanced database design.\"}),\"\\n\",l(s.h2,{id:\"-github-repository\",children:[n(s.a,{className:\"subheading-anchor\",\"aria-label\":\"Link to section\",href:\"#-github-repository\",children:n(s.span,{className:\"icon icon-link\"})}),\"üìå GitHub Repository\"]}),\"\\n\",l(s.p,{children:[\"If you'd like a downloadable template of this codebase or want to contribute, \",n(s.a,{href:\"https://github.com/SkidGod4444/LumeDB\",children:\"here you go\"})]}),\"\\n\",n(s.p,{children:\"Let me know which part you‚Äôd like to explore next: pages, indexes, transactions, or query planner?\"}),\"\\n\",n(s.p,{children:\"Happy hacking! üõ†Ô∏è\"})]})}return{default:function(e={}){const{wrapper:l}=e.components||{};return l?n(l,{...e,children:n(_createMdxContent,{...e})}):_createMdxContent(e)}};function _missingMdxReference(e,n){throw new Error(\"Expected \"+(n?\"component\":\"object\")+\" `\"+e+\"` to be defined: you likely forgot to import, pass, or provide it.\")}",
    "toc": {
      "content": [
        {
          "title": "Introduction",
          "url": "#introduction",
          "items": []
        },
        {
          "title": "Technologies",
          "url": "#technologies",
          "items": []
        },
        {
          "title": "Project Setup",
          "url": "#project-setup",
          "items": []
        },
        {
          "title": "üß± Step 1: The Basic CLI Shell",
          "url": "#-step-1-the-basic-cli-shell",
          "items": []
        },
        {
          "title": "üß† Step 2: Core Database Logic",
          "url": "#-step-2-core-database-logic",
          "items": []
        },
        {
          "title": "üå≥ Step 3: B-Tree In-Memory Store",
          "url": "#-step-3-b-tree-in-memory-store",
          "items": []
        },
        {
          "title": "üíæ Step 4: Persistent Storage with Pager",
          "url": "#-step-4-persistent-storage-with-pager",
          "items": []
        },
        {
          "title": "üîê Step 5: Write-Ahead Log (WAL)",
          "url": "#-step-5-write-ahead-log-wal",
          "items": []
        },
        {
          "title": "üìÅ Step 6: Multi-Table Support",
          "url": "#-step-6-multi-table-support",
          "items": []
        },
        {
          "title": "üîö Conclusion",
          "url": "#-conclusion",
          "items": []
        },
        {
          "title": "üìå GitHub Repository",
          "url": "#-github-repository",
          "items": []
        }
      ],
      "visible": true
    },
    "slugAsParams": "build-your-own-database"
  },
  {
    "slug": "blogs/discord-development-beginner-to-advanced-level",
    "title": "Discord bot development Beginner to Advanced level",
    "description": "A comprehensive guide to Discord bot development, covering essential concepts and best practices from fundamentals to advanced implementations. This tutorial walks through building a complete Ticket System bot, demonstrating practical application of Discord.js concepts and patterns.",
    "github": "https://github.com/SkidGod4444/blogs/blob/main/content/blogs/discord-development-beginner-to-advanced-level.mdx",
    "cover": "/static/ddsba.png",
    "shortenSlug": "ddsba",
    "published": true,
    "date": "2024-04-02T00:00:00.000Z",
    "body": "const{Fragment:e,jsx:n,jsxs:t}=arguments[0];function _createMdxContent(o){const i={a:\"a\",h2:\"h2\",p:\"p\",span:\"span\",...o.components},{Callout:r,CalloutDescription:c,CalloutTitle:a}=i;return r||_missingMdxReference(\"Callout\",!0),c||_missingMdxReference(\"CalloutDescription\",!0),a||_missingMdxReference(\"CalloutTitle\",!0),t(e,{children:[t(r,{type:\"info\",children:[n(a,{children:\"Note\"}),n(c,{children:t(i.p,{children:[\"Follow along with our step-by-step video tutorials on our \",n(i.a,{href:\"https://dub.sh/skidgod\",children:\"YouTube channel\"}),\" - don't forget to watch and subscribe to stay updated!\"]})})]}),\"\\n\",t(i.h2,{id:\"introduction\",children:[n(i.a,{className:\"subheading-anchor\",\"aria-label\":\"Link to section\",href:\"#introduction\",children:n(i.span,{className:\"icon icon-link\"})}),\"Introduction\"]}),\"\\n\",n(i.p,{children:\"Later on baby!\"})]})}return{default:function(e={}){const{wrapper:t}=e.components||{};return t?n(t,{...e,children:n(_createMdxContent,{...e})}):_createMdxContent(e)}};function _missingMdxReference(e,n){throw new Error(\"Expected \"+(n?\"component\":\"object\")+\" `\"+e+\"` to be defined: you likely forgot to import, pass, or provide it.\")}",
    "toc": {
      "content": [
        {
          "title": "Introduction",
          "url": "#introduction",
          "items": []
        }
      ],
      "visible": true
    },
    "slugAsParams": "discord-development-beginner-to-advanced-level"
  }
]